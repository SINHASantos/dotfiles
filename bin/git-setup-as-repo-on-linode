#!/bin/bash

# This script will set the current folder up as a repo on my linode server
# It will ssh into the server, an empty git repo in the home folder with
# the name of the current working directory.
# It will then setup the new repo as a remote and push master

set -e

dir=${PWD##*/}

ssh root@linode "cd /home/git; mkdir $dir.git; cd $dir.git; git --bare init; sudo chown -R git:www-data /home/git/$dir.git"
git remote add origin git@linode:$dir.git
git push -u origin master
